{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\maxim\\\\Documents\\\\Code\\\\React\\\\dofus-items\\\\frontend\\\\src\\\\components\\\\ItemCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"../css/ItemCard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemCard = ({\n  item,\n  prices\n}) => {\n  _s();\n  const [recipe, setRecipe] = useState(null); // État pour stocker les données de la recette\n  const [ingredients, setIngredients] = useState([]); // État pour stocker les détails des ingrédients\n  const [loading, setLoading] = useState(true); // État pour gérer le chargement\n  const [error, setError] = useState(null); // État pour gérer les erreurs\n\n  const itemPrice = prices.find(price => price.id === item.id);\n  const formatPrice = price => {\n    if (!price) return \"\";\n    return parseInt(price, 10).toLocaleString(\"fr-FR\"); // Formatage des nombres pour la France\n  };\n  useEffect(() => {\n    const fetchRecipe = async () => {\n      try {\n        const response = await axios.get(`https://api.dofusdb.fr/recipes?resultId=${item.id}`);\n        const recipeData = response.data.data[0];\n        setRecipe(recipeData); // Stocker les données de la recette\n\n        // Récupérer les détails des ingrédients\n        const ingredientPromises = recipeData.ingredientIds.map(ingredientId => axios.get(`https://api.dofusdb.fr/items/${ingredientId}`));\n        const ingredientResponses = await Promise.all(ingredientPromises);\n        const ingredientDetails = ingredientResponses.map(response => response.data);\n        setIngredients(ingredientDetails); // Stocker les détails des ingrédients\n      } catch (error) {\n        setError(\"Erreur lors de la récupération des données de la recette.\");\n      } finally {\n        setLoading(false); // Fin du chargement\n      }\n    };\n    fetchRecipe();\n  }, [item.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"item-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: item.name.fr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Type: \", item.type.name.fr]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: item.imgset[1].url,\n      alt: item.name.fr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), itemPrice && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Prix: \", formatPrice(itemPrice.price), \" Kamas\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), recipe && ingredients.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Recette\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: recipe.ingredientIds.map((ingredientId, index) => {\n          const ingredient = ingredients.find(item => item.id === ingredientId);\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [ingredient.name.fr, \" : \", recipe.quantities[index]]\n          }, ingredientId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(ItemCard, \"869/UvPphX9OmOuAr/VmNgH8tCU=\");\n_c = ItemCard;\nexport default ItemCard;\nvar _c;\n$RefreshReg$(_c, \"ItemCard\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ItemCard","item","prices","_s","recipe","setRecipe","ingredients","setIngredients","loading","setLoading","error","setError","itemPrice","find","price","id","formatPrice","parseInt","toLocaleString","fetchRecipe","response","get","recipeData","data","ingredientPromises","ingredientIds","map","ingredientId","ingredientResponses","Promise","all","ingredientDetails","className","children","name","fr","fileName","_jsxFileName","lineNumber","columnNumber","type","src","imgset","url","alt","length","index","ingredient","quantities","_c","$RefreshReg$"],"sources":["C:/Users/maxim/Documents/Code/React/dofus-items/frontend/src/components/ItemCard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../css/ItemCard.css\";\r\n\r\nconst ItemCard = ({ item, prices }) => {\r\n  const [recipe, setRecipe] = useState(null); // État pour stocker les données de la recette\r\n  const [ingredients, setIngredients] = useState([]); // État pour stocker les détails des ingrédients\r\n  const [loading, setLoading] = useState(true); // État pour gérer le chargement\r\n  const [error, setError] = useState(null); // État pour gérer les erreurs\r\n\r\n  const itemPrice = prices.find((price) => price.id === item.id);\r\n\r\n  const formatPrice = (price) => {\r\n    if (!price) return \"\";\r\n    return parseInt(price, 10).toLocaleString(\"fr-FR\"); // Formatage des nombres pour la France\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchRecipe = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://api.dofusdb.fr/recipes?resultId=${item.id}`\r\n        );\r\n        const recipeData = response.data.data[0];\r\n        setRecipe(recipeData); // Stocker les données de la recette\r\n\r\n        // Récupérer les détails des ingrédients\r\n        const ingredientPromises = recipeData.ingredientIds.map(\r\n          (ingredientId) =>\r\n            axios.get(`https://api.dofusdb.fr/items/${ingredientId}`)\r\n        );\r\n\r\n        const ingredientResponses = await Promise.all(ingredientPromises);\r\n        const ingredientDetails = ingredientResponses.map(\r\n          (response) => response.data\r\n        );\r\n\r\n        setIngredients(ingredientDetails); // Stocker les détails des ingrédients\r\n      } catch (error) {\r\n        setError(\"Erreur lors de la récupération des données de la recette.\");\r\n      } finally {\r\n        setLoading(false); // Fin du chargement\r\n      }\r\n    };\r\n\r\n    fetchRecipe();\r\n  }, [item.id]);\r\n\r\n  return (\r\n    <div className=\"item-card\">\r\n      <h3>{item.name.fr}</h3>\r\n      <p>Type: {item.type.name.fr}</p>\r\n      <img src={item.imgset[1].url} alt={item.name.fr} />\r\n      {itemPrice && <p>Prix: {formatPrice(itemPrice.price)} Kamas</p>}\r\n\r\n      {loading && <p>Chargement...</p>}\r\n      {error && <p>{error}</p>}\r\n      {recipe && ingredients.length > 0 && (\r\n        <div>\r\n          <h4>Recette</h4>\r\n          <ul>\r\n            {recipe.ingredientIds.map((ingredientId, index) => {\r\n              const ingredient = ingredients.find(\r\n                (item) => item.id === ingredientId\r\n              );\r\n              return (\r\n                <li key={ingredientId}>\r\n                  {ingredient.name.fr} : {recipe.quantities[index]}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}